(function(){var a;a=function(){return{state:[],turn:0,init:function(){return $(".start-again").attr("disabled",!0),this.state=[[0,0,0],[0,0,0],[0,0,0]],this.turn=this._rand(2),1===this.turn?this._play():void 0},render:function(){return $(".board .row .cell").removeClass("x o"),this.state.forEach(function(a){return function(b,c){return b.forEach(function(b,d){var e;switch(b){case 1:e="x";break;case 2:e="o";break;default:e=""}return a._cellFor(d,c).addClass(e)})}}(this))},registerClicks:function(){return this.state.forEach(function(a){return function(b,c){return b.forEach(function(b,d){return a._cellFor(d,c).click(function(){return 0===a.turn&&0===a.state[c][d]?(a.state[c][d]=1,a.turn=1,a.render(),a._checkWin(),a._play()):void 0})})}}(this)),$(".start-again").click(function(a){return function(){return a.init(),a.render()}}(this))},_cellFor:function(a,b){return $(".board .row:nth-child("+(b+1)+") .cell:nth-child("+(a+1)+")")},_play:function(){var a,b,c;for(c=[];!this._gameOver();){if(a=this._rand(3),b=this._rand(3),0===this.state[b][a]){this.state[b][a]=2,this.turn=0,this.render(),this._checkWin();break}c.push(void 0)}return c},_rand:function(a){return Math.floor(Math.random()*a)},_checkWin:function(){var a;if(a=this._hasWin(),a>0||this._gameOver()){if($(".start-again").attr("disabled",!1),1===a)return alert("You won!");if(2===a)return alert("The computer won")}},_hasWin:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n;for(c=h=1;2>=h;c=++h){for(g=i=0;3>i;g=++i){for(e=!0,f=j=0;3>j;f=++j)e=e&&this.state[g][f]===c;if(e)return c}for(f=k=0;3>k;f=++k){for(a=!0,g=l=0;3>l;g=++l)a=a&&this.state[g][f]===c;if(a)return c}for(b=!0,f=m=0;3>m;f=++m)b=b&&this.state[f][f]===c;if(b)return c;for(d=!0,f=n=0;3>n;f=++n)d=d&&this.state[this.state.length-f-1][f]===c;if(d)return c}return-1},_gameOver:function(){var a,b,c,d,e,f,g;if(this._hasWin()>=0)return!0;for(g=this.state,c=0,e=g.length;e>c;c++)for(b=g[c],d=0,f=b.length;f>d;d++)if(a=b[d],0===a)return!1;return!0},ready:function(){return this.init(),this.registerClicks(),this.render()}}},window.App=new a,$(document).ready(function(){return App.ready()})}).call(this);